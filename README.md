# ๐ Telegram Products Marketplace

Telegram-ะฑะพั ะดะปั ะผะฐัะบะตัะฟะปะตะนัะฐ ะผะตััะฝัั ะฟัะพะดะฐะฒัะพะฒ ั ะฟะพะดะดะตัะถะบะพะน ะพะฟะปะฐัั ัะตัะตะท ะฎKassa.

## ๐ ะะพะทะผะพะถะฝะพััะธ

### ะะปั ะฟะพะบัะฟะฐัะตะปะตะน ๐ค
- โ ะะตะณะธัััะฐัะธั ัะตัะตะท Telegram ID ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ ะฝะพะผะตัะฐ ัะตะปะตัะพะฝะฐ
- ๐ฆ ะัะพัะผะพัั ะบะฐัะฐะปะพะณะฐ ัะพะฒะฐัะพะฒ
- ๐ ะะพะธัะบ ะฟะพ ัะพะฒะฐัะฐะผ (ัะตัะตะท conversations)
- ๐ ะะพัะทะธะฝะฐ
- ๐ณ ะะฟะปะฐัะฐ ัะตัะตะท Telegram Pay (ะฎKassa + ะกะะ)
- ๐ ะััะพัะธั ะทะฐะบะฐะทะพะฒ
- ๐ ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะฟัะพัะธะปัะผะธ ะฟะพะบัะฟะฐัะตะปั ะธ ะฟัะพะดะฐะฒัะฐ

### ะะปั ะฟัะพะดะฐะฒัะพะฒ ๐ช
- โ ะะตะณะธัััะฐัะธั ะฟัะพะดะฐะฒัะฐ ั ัะบะฐะทะฐะฝะธะตะผ ะผะฐะณะฐะทะธะฝะฐ ะธ ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ ะฝะพะผะตัะฐ ัะตะปะตัะพะฝะฐ
- โ ะะพะฑะฐะฒะปะตะฝะธะต ัะพะฒะฐัะพะฒ
- โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ัะพะฒะฐัะพะฒ
- ๐ ะัะพัะผะพัั ะทะฐะบะฐะทะพะฒ
- ๐ ะกัะฐัะธััะธะบะฐ ะฟัะพะดะฐะถ
- ๐ ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฝะพะฒัั ะทะฐะบะฐะทะฐั
- ๐ ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะฟัะพัะธะปัะผะธ ะฟะพะบัะฟะฐัะตะปั ะธ ะฟัะพะดะฐะฒัะฐ

### ะะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ ๐จโ๐ผ
- ๐ท ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐัะตะณะพัะธัะผะธ
- ๐ฅ ะะพะดะตัะฐัะธั ะฟัะพะดะฐะฒัะพะฒ
- ๐ ะกัะฐัะธััะธะบะฐ ะฟะปะฐััะพัะผั
- โ๏ธ ะะฐัััะพะนะบะฐ ะบะพะผะธััะธะธ

## ๐ ะฃััะฐะฝะพะฒะบะฐ

1. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
npm install
```

2. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะฟะฐะฟะบะต `src`:
```env
BOT_TOKEN=your_telegram_bot_token
MONGO_URL=mongodb://localhost:27017
ADMIN_ID=your_telegram_user_id
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
ADMIN_COMMISSION_PERCENT=10
```

3. ะะฐะฟัััะธัะต ะฑะพัะฐ:
```bash
npm start
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
src/
โโโ bot/                     # ะะพะณะธะบะฐ ะฑะพัะฐ (ะฑัะดะตั ัะดะฐะปะตะฝะฐ)
โโโ config/                  # ะะพะฝัะธะณััะฐัะธั
โ   โโโ commands.ts         # ะะพะผะฐะฝะดั ะฑะพัะฐ
โโโ database/
โ   โโโ models/             # Mongoose ะผะพะดะตะปะธ
โ   โ   โโโ User.ts
โ   โ   โโโ Product.ts
โ   โ   โโโ Category.ts
โ   โ   โโโ Order.ts
โ   โ   โโโ Cart.ts
โ   โโโ seed.ts             # ะะฝะธัะธะฐะปะธะทะฐัะธั ะบะฐัะตะณะพัะธะน
โโโ handlers/               # ะะฑัะฐะฑะพััะธะบะธ ัะพะฑััะธะน
โ   โโโ commands.ts         # ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด
โ   โโโ callbackQuery.ts    # ะะฑัะฐะฑะพััะธะบะธ callback
โ   โโโ text.ts             # ะะฑัะฐะฑะพััะธะบะธ ัะตะบััะฐ
โโโ services/               # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โโโ user.ts             # ะกะตัะฒะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โโโ shared/                 # ะะฑัะธะต ะบะพะผะฟะพะฝะตะฝัั
โ   โโโ keyboards.ts        # ะะปะฐะฒะธะฐัััั
โ   โโโ session.ts          # ะกะตััะธะธ
โโโ types/                  # TypeScript ัะธะฟั
โ   โโโ bot.ts
โ   โโโ models.ts
โ   โโโ plugins.ts
โโโ index.ts                # ะขะพัะบะฐ ะฒัะพะดะฐ
```

## ๐ ะะพะณะธะบะฐ ะฟะตัะตะบะปััะตะฝะธั ะฟัะพัะธะปะตะน

ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฑััั:
- **ะขะพะปัะบะพ ะฟะพะบัะฟะฐัะตะปะตะผ** - ัะตะณะธัััะฐัะธั ัะตัะตะท ะบะฝะพะฟะบั "ะกัะฐัั ะฟะพะบัะฟะฐัะตะปะตะผ"
- **ะขะพะปัะบะพ ะฟัะพะดะฐะฒัะพะผ** - ัะตะณะธัััะฐัะธั ัะตัะตะท ะบะฝะพะฟะบั "ะกัะฐัั ะฟัะพะดะฐะฒัะพะผ"
- **ะ ะฟะพะบัะฟะฐัะตะปะตะผ, ะธ ะฟัะพะดะฐะฒัะพะผ** - ัะตะณะธัััะฐัะธั ัะตัะตะท "ะกัะฐัั ะธ ะฟะพะบัะฟะฐัะตะปะตะผ, ะธ ะฟัะพะดะฐะฒัะพะผ"

ะขะตะบััะธะน ะฟัะพัะธะปั ััะฐะฝะธััั ะฒ **ัะตััะธะธ** (`ctx.session.profile`), ะฐ ััะฐัััั ะฐะบัะธะฒะฝะพััะธ - ะฒ **ะฑะฐะทะต ะดะฐะฝะฝัั** (`user.profiles.buyer.isActive`, `user.profiles.seller.isActive`).

ะะตัะตะบะปััะตะฝะธะต ะฟัะพัะธะปั ะฟัะพะธััะพะดะธั ัะตัะตะท ะบะฝะพะฟะบั "๐ ะกะผะตะฝะธัั ะฟัะพัะธะปั".

## ๐ฆ ะะพะดะตะปะธ ะดะฐะฝะฝัั

### User
- `telegramId` - ID ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ Telegram
- `profiles.buyer` - ะฟัะพัะธะปั ะฟะพะบัะฟะฐัะตะปั (isActive, ordersCount)
- `profiles.seller` - ะฟัะพัะธะปั ะฟัะพะดะฐะฒัะฐ (isActive, shopName, description, etc.)

### Product
- `sellerId` - ID ะฟัะพะดะฐะฒัะฐ
- `categoryId` - ID ะบะฐัะตะณะพัะธะธ
- `name`, `description`, `price`
- `images`, `sizes`, `quantity`
- `status` - available | out_of_stock | hidden

### Order
- `orderNumber` - ัะฝะธะบะฐะปัะฝัะน ะฝะพะผะตั ะทะฐะบะฐะทะฐ
- `buyerId` - ID ะฟะพะบัะฟะฐัะตะปั
- `items[]` - ัะพะฒะฐัั ะฒ ะทะฐะบะฐะทะต
- `totalAmount`, `commissionAmount`, `sellerAmount`
- `status` - pending | paid | processing | completed | cancelled

### Category
- `name`, `emoji`, `description`
- `order` - ะฟะพััะดะพะบ ะพัะพะฑัะฐะถะตะฝะธั

### Cart
- `userId` - ID ะฟะพะปัะทะพะฒะฐัะตะปั
- `items[]` - ัะพะฒะฐัั ะฒ ะบะพัะทะธะฝะต

## ๐ฏ ะกะปะตะดัััะธะต ัะฐะณะธ

- [ ] ะะพะฑะฐะฒะธัั conversation ะดะปั ัะตะณะธัััะฐัะธะธ ะฟัะพะดะฐะฒัะฐ
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะบะฐัะฐะปะพะณ ัะพะฒะฐัะพะฒ
- [ ] ะะพะฑะฐะฒะธัั ััะฝะบัะธะพะฝะฐะป ะบะพัะทะธะฝั
- [ ] ะะฝัะตะณัะธัะพะฒะฐัั ะฎKassa ะดะปั ะพะฟะปะฐัั
- [ ] ะะพะฑะฐะฒะธัั ัะธััะตะผั ัะฒะตะดะพะผะปะตะฝะธะน
- [ ] ะะตะฐะปะธะทะพะฒะฐัั ะฟะพะธัะบ ะฟะพ ัะพะฒะฐัะฐะผ
- [ ] ะะพะฑะฐะฒะธัั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั

## ๐ ะะธัะตะฝะทะธั

MIT
